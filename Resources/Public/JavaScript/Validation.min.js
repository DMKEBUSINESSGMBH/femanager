jQuery.fn.femanagerValidation=function(e){function a(a){c=new v({numRequest:a.find("*[data-validation]").length,element:a}),a.find("*[data-validation]").each(function(){t(e(this),!0)})}function t(a,t){if(a.prop("disabled"))return void(t&&c.addCallbackToQueue(!0));var o=a.closest("form"),d=o.data("femanager-plugin"),p=o.data("femanager-plugin-name"),v=o.find("div:first").find('input[name="tx_'+p+' [user][__identity]"]').val(),g=o.find("div:first").find('input[name="tx_'+p+'[__referrer][@action]"]').val(),m=Femanager.getBaseUrl()+"?id="+e("#femanagerPid").val()+"&type=1548935210",h=e("#femanagerStoragePid").val(),b=a.attr("data-validation"),_=s(a),x=a.val();"checkbox"==a.prop("type")&&0==a.prop("checked")&&(x="");var y="";if(l(_,"sameAs")){var C=l(_,"sameAs"),k=u(C),T=e('input[name="tx_'+p+"[user]["+k+']"]');y=T.val(),"checkbox"==T.prop("type")&&0==T.prop("checked")&&(y="")}var P={storagePid:h,L:e("#femanagerLanguage").val(),id:e("#femanagerPid").val()};P["tx_"+p+"[validation]"]=b,P["tx_"+p+"[value]"]=x,P["tx_"+p+"[field]"]=n(a),P["tx_"+p+"[user]"]=void 0!==v?v:"",P["tx_"+p+"[additionalValue]"]=y?y:"",P["tx_"+p+"[plugin]"]=d,P["tx_"+p+"[pluginName]"]=p,P["tx_"+p+"[referrerAction]"]=g,console.log(P),e.ajax({url:m,data:P,type:"POST",cache:!1,success:function(e){if(t&&c.addCallbackToQueue(!0),e)try{e.validate?i(a):r(a,e.message)}catch(n){a.before(data)}},error:function(){f()}})}function n(e){var a="",t=e.prop("name").split("[");return a=void 0!==t[2]?t[2].replace("]",""):t[1].replace("]","")}function r(a,t){i(a);var n=e(".femanager_invitation_container").html().replace("###messages###",t);a.before(n),a.closest(".form-group").addClass("has-error"),a.addClass("error")}function i(e){e.closest(".form-group").removeClass("has-error"),e.siblings(".alert").remove(),e.removeClass("error")}function o(a){0==a.find(".error").length?(p=!0,a.trigger("submit")):e("html,body").animate({scrollTop:a.find(".error:first").offset().top})}function l(e,a){for(var t=0;t<e.length;t++)if(e[t].indexOf(a)!==-1)return e[t];return""}function s(e){return e.attr("data-validation").split(",")}function u(e){var a="";if(e.indexOf("(")!==-1){var t=e.split("(");a=t[1].substr(0,t[1].length-1)}return a}function f(){"object"==typeof console&&console.log("Error: The called url is not available - if you use TYPO3 in a subfolder, please use config.baseURL in TypoScript")}var c,d=e(this),p=!1;0==d.find("*[data-validation]").length&&(p=!0);var v=function(){var a,t,n;return function(r){r||(r={}),a=r.numRequest||0,t=r.requestsCompleted||0,d=r.element||0,n=[];var i=function(){e("body").css("cursor","default"),o(d);for(var a=0;a<n.length;a++)n[a]()};r.singleCallback&&n.push(r.singleCallback),this.addCallbackToQueue=function(e,r){e&&t++,r&&n.push(r),t==a&&i()},this.requestComplete=function(e){e&&t++,t==a&&i()},this.setCallback=function(e){n.push(callBack)}}}();e("*[data-validation]").on("blur",function(){t(e(this),!1)}),d.on("submit",function(t){e("body").css("cursor","wait"),p||(t.preventDefault(),a(e(this)))})};