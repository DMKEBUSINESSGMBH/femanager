jQuery.fn.femanagerValidation=function(a){function e(e){u=new g({numRequest:e.find("*[data-validation]").length,element:e}),e.find("*[data-validation]").each(function(){n(a(this),!0)})}function n(e,n){if(e.prop("disabled"))return void(n&&u.addCallbackToQueue(!0));var o=e.closest("form"),c=o.find("div:first").find('input[name="tx_femanager_validation[user][__identity]"]').val(),v=o.find("div:first").find('input[name="tx_femanager_validation[__referrer][@action]"]').val(),g=Femanager.getBaseUrl()+"?id="+a("#femanagerPid").val()+"&type=1548935210",m=s(e),p=e.val();"checkbox"==e.prop("type")&&0==e.prop("checked")&&(p="");var h="";if(l(m,"sameAs")){var _=l(m,"sameAs"),b=f(_),x=a('input[name="tx_femanager_validation[user]['+b+']"]');h=x.val(),"checkbox"==x.prop("type")&&0==x.prop("checked")&&(h="")}console.log(g),a.ajax({url:g,data:{"tx_femanager_validation[validation]":e.attr("data-validation"),"tx_femanager_validation[value]":p,"tx_femanager_validation[field]":t(e),"tx_femanager_validation[user]":void 0!==c?c:"","tx_femanager_validation[additionalValue]":h?h:"","tx_femanager_validation[plugin]":o.data("femanager-plugin"),"tx_femanager_validation[referrerAction]":v,storagePid:a("#femanagerStoragePid").val(),L:a("#femanagerLanguage").val(),id:a("#femanagerPid").val()},type:"POST",cache:!1,success:function(a){if(n&&u.addCallbackToQueue(!0),a)try{a.validate?r(e):i(e,a.message)}catch(t){e.before(data)}},error:function(){d()}})}function t(a){var e="",n=a.prop("name").split("[");return e=void 0!==n[2]?n[2].replace("]",""):n[1].replace("]","")}function i(e,n){r(e);var t=a(".femanager_validation_container").html().replace("###messages###",n);e.before(t),e.closest(".form-group").addClass("has-error"),e.addClass("error")}function r(a){a.closest(".form-group").removeClass("has-error"),a.siblings(".alert").remove(),a.removeClass("error")}function o(e){0==e.find(".error").length?(v=!0,e.trigger("submit")):a("html,body").animate({scrollTop:e.find(".error:first").offset().top})}function l(a,e){for(var n=0;n<a.length;n++)if(a[n].indexOf(e)!==-1)return a[n];return""}function s(a){return a.attr("data-validation").split(",")}function f(a){var e="";if(a.indexOf("(")!==-1){var n=a.split("(");e=n[1].substr(0,n[1].length-1)}return e}function d(){"object"==typeof console&&console.log("Error: The called url is not available - if you use TYPO3 in a subfolder, please use config.baseURL in TypoScript")}var u,c=a(this),v=!1;0==c.find("*[data-validation]").length&&(v=!0);var g=function(){var e,n,t;return function(i){i||(i={}),e=i.numRequest||0,n=i.requestsCompleted||0,c=i.element||0,t=[];var r=function(){a("body").css("cursor","default"),o(c);for(var e=0;e<t.length;e++)t[e]()};i.singleCallback&&t.push(i.singleCallback),this.addCallbackToQueue=function(a,i){a&&n++,i&&t.push(i),n==e&&r()},this.requestComplete=function(a){a&&n++,n==e&&r()},this.setCallback=function(a){t.push(callBack)}}}();a("*[data-validation]").on("blur",function(){n(a(this),!1)}),c.on("submit",function(n){a("body").css("cursor","wait"),v||(n.preventDefault(),e(a(this)))})};